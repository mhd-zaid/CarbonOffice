{% extends 'back/base.html.twig' %}

{% block main %}
    <ul
            class="mb-5 flex list-none flex-row flex-wrap border-b-0 pl-0"
            role="tablist"
            data-te-nav-ref>
        {% for discussion in entities %}
            {% if loop.first %}
                <li role="presentation">
                    <a
                            href="#tabs-{{discussion.instance.id}}"
                            class="my-2 block border-x-0 border-b-2 border-t-0 border-transparent px-7 pb-3.5 pt-4 text-xs font-medium uppercase leading-tight text-neutral-500 hover:isolate hover:border-transparent hover:bg-neutral-100 focus:isolate focus:border-transparent data-[te-nav-active]:border-primary data-[te-nav-active]:text-primary dark:text-neutral-400 dark:hover:bg-transparent dark:data-[te-nav-active]:border-primary-400 dark:data-[te-nav-active]:text-primary-400"
                            data-te-toggle="pill"
                            data-te-target="#tabs-{{discussion.instance.id}}"
                            data-te-nav-active
                            role="tab"
                            aria-controls="tabs-{{discussion.instance.id}}"
                            aria-selected="true"
                    >{{discussion.instance.title}}</a
                    >
                </li>
            {% elseif loop.index % 2 == 0 %}
                <li role="presentation">
                    <a
                            href="#tabs-{{discussion.instance.id}}"
                            class="my-2 block border-x-0 border-b-2 border-t-0 border-transparent px-7 pb-3.5 pt-4 text-xs font-medium uppercase leading-tight text-neutral-500 hover:isolate hover:border-transparent hover:bg-neutral-100 focus:isolate focus:border-transparent data-[te-nav-active]:border-primary data-[te-nav-active]:text-primary dark:text-neutral-400 dark:hover:bg-transparent dark:data-[te-nav-active]:border-primary-400 dark:data-[te-nav-active]:text-primary-400"
                            data-te-toggle="pill"
                            data-te-target="#tabs-{{discussion.instance.id}}"
                            role="tab"
                            aria-controls="tabs-{{discussion.instance.id}}"
                            aria-selected="false"
                    >{{discussion.instance.title}}</a
                    >
                </li>
            {% else %}
                <li role="presentation">
                    <a
                            href="#tabs-{{discussion.instance.id}}"
                            class="focus:border-transparen my-2 block border-x-0 border-b-2 border-t-0 border-transparent px-7 pb-3.5 pt-4 text-xs font-medium uppercase leading-tight text-neutral-500 hover:isolate hover:border-transparent hover:bg-neutral-100 focus:isolate data-[te-nav-active]:border-primary data-[te-nav-active]:text-primary dark:text-neutral-400 dark:hover:bg-transparent dark:data-[te-nav-active]:border-primary-400 dark:data-[te-nav-active]:text-primary-400"
                            data-te-toggle="pill"
                            data-te-target="#tabs-{{discussion.instance.id}}"
                            role="tab"
                            aria-controls="tabs-{{discussion.instance.id}}"
                            aria-selected="false"
                    >{{discussion.instance.title}}</a
                    >
                </li>
            {% endif %}

        {% endfor %}
    </ul>

    <!--Tabs content-->
    <div class="mb-6">
        {% for discussion in entities %}
            {% if loop.first %}
                {% include 'back/post/_form.html.twig' with {'discussionId': discussion.instance.id} %}
                <div
                        class="hidden opacity-100 transition-opacity duration-150 ease-linear data-[te-tab-active]:block"
                        id="tabs-{{discussion.instance.id}}"
                        role="tabpanel"
                        aria-labelledby="tabs-home-tab"
                        data-te-tab-active>
                    {% for post in discussion.instance.posts|sort((a, b) => b.id <=> a.id) %}
                        <!-- component -->
                        <div class="post">

                            <div class="flex justify-center p-16">
                                <div class="bg-white border rounded-lg max-w-md">
                                    <div class="flex items-center px-4 py-3 bg-gray-50">
                                        <img class="h-8 w-8 rounded-full" src="https://randomuser.me/api/portraits/men/{{ post.id }}.jpg"/>
                                        <div class="ml-3 ">
                                        <span class="text-sm font-semibold antialiased block leading-tight">{{ post.employee.firstname }}
                                            {{ post.employee.lastname }}</span>
                                        </div>
                                    </div>
                                    <img src="https://picsum.photos/id/{{ post.id }}/900/900"/>
                                    <div class="font-semibold text-sm px-4 pt-2 pb-4 bg-gray-50">{{ post.message }}</div>
                                </div>
                            </div>

                        </div>
                    {% endfor %}
                </div>
            {% elseif loop.index % 2 == 0 %}
                <div
                        class="hidden opacity-0 transition-opacity duration-150 ease-linear data-[te-tab-active]:block"
                        id="tabs-{{discussion.instance.id}}"
                        role="tabpanel"
                        aria-labelledby="tabs-profile-tab">
                    {% for post in discussion.instance.posts %}
                        <!-- component -->
                        <div class="post">

                            <div class="flex justify-center p-16">
                                <div class="bg-white border rounded-lg max-w-md">
                                    <div class="flex items-center px-4 py-3 bg-gray-50">
                                        <img class="h-8 w-8 rounded-full" src="https://randomuser.me/api/portraits/men/{{ post.id }}.jpg"/>
                                        <div class="ml-3 ">
                                        <span class="text-sm font-semibold antialiased block leading-tight">{{ post.employee.firstname }}
                                            {{ post.employee.lastname }}</span>
                                        </div>
                                    </div>
                                    <img src="https://picsum.photos/id/{{ post.id }}/900/900"/>
                                    <div class="font-semibold text-sm px-4 pt-2 pb-4 bg-gray-50">{{ post.message }}</div>
                                </div>
                            </div>

                        </div>
                    {% endfor %}
                </div>
            {% else %}
                <div
                        class="hidden opacity-0 transition-opacity duration-150 ease-linear data-[te-tab-active]:block"
                        id="tabs-{{discussion.instance.id}}"
                        role="tabpanel"
                        aria-labelledby="tabs-profile-tab">
                    {% for post in discussion.instance.posts %}
                        <!-- component -->
                        <div class="post">

                            <div class="flex justify-center p-16">
                                <div class="bg-white border rounded-lg max-w-md">
                                    <div class="flex items-center px-4 py-3 bg-gray-50">
                                        <img class="h-8 w-8 rounded-full" src="https://randomuser.me/api/portraits/men/{{ post.id }}.jpg"/>
                                        <div class="ml-3 ">
                                        <span class="text-sm font-semibold antialiased block leading-tight">{{ post.employee.firstname }}
                                            {{ post.employee.lastname }}</span>
                                        </div>
                                    </div>
                                    <img src="https://picsum.photos/id/{{ post.id }}/900/900"/>
                                    <div class="font-semibold text-sm px-4 pt-2 pb-4 bg-gray-50">{{ post.message }}</div>
                                </div>
                            </div>

                        </div>
                    {% endfor %}
                </div>
            {% endif %}
        {% endfor %}
    </div>

{% endblock %}
